{"ast":null,"code":"import _defineProperty from\"/Users/yanghaochen/Desktop/CS185/CS185_hw8/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/yanghaochen/Desktop/CS185/CS185_hw8/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yanghaochen/Desktop/CS185/CS185_hw8/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/yanghaochen/Desktop/CS185/CS185_hw8/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/yanghaochen/Desktop/CS185/CS185_hw8/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Helper from'./Movie_helper2';import config from'../config.js';// import './Movie.css';\nvar firebase=require('firebase');export var Movie=/*#__PURE__*/function(_Component){_inherits(Movie,_Component);var _super=_createSuper(Movie);function Movie(props){var _this;_classCallCheck(this,Movie);_this=_super.call(this);_this.myChangeHandler=function(event){var n=event.target.name;var v=event.target.value;_this.setState(_defineProperty({},n,v));var movie_choice=document.getElementById('list').value;if(movie_choice==='all'){var ref=firebase.database().ref('movies');ref.once('value').then(function(snapshot){var movies=snapshot.val();var newData=[];for(var entry in movies){newData.push({id:entry,name:movies[entry].name,src:movies[entry].src,director:movies[entry].director,imdb:movies[entry].imdb,plot:movies[entry].plot});}_this.setState({lastMov:newData[newData.length-1]});if(newData.length<9){_this.setState({displayButton:'none'});}else{_this.setState({displayButton:'block'});}});var first=ref.orderByKey().limitToFirst(9);first.once('value').then(function(snapshot){var l_movie=snapshot.val();var hit_eight=[];for(var entry in l_movie){hit_eight.push({id:entry,name:l_movie[entry].name,src:l_movie[entry].src,director:l_movie[entry].director,imdb:l_movie[entry].imdb,plot:l_movie[entry].plot});}_this.setState({currPoint:hit_eight[hit_eight.length-1].id});hit_eight.pop();_this.setState({movies:hit_eight});});}else{var movsInList=[];var _ref=firebase.database().ref('relations');_ref.once('value').then(function(snapshot){var rels=snapshot.val();for(var entry in rels){if(rels[entry].list===movie_choice){movsInList.push(rels[entry].mov);}}var movsRef=firebase.database().ref('movies');movsRef.once('value').then(function(snapshot){var movies=snapshot.val();var newData=[];for(var _entry in movies){if(movsInList.includes(_entry)){newData.push({id:_entry,name:movies[_entry].name,src:movies[_entry].src,director:movies[_entry].director,imdb:movies[_entry].imdb,plot:movies[_entry].plot});}}if(newData.length<9){_this.setState({displayButton:'none'});}else{_this.setState({displayButton:'block'});}_this.setState({movies:newData});});});}};_this.state={movies:[],lists:[],currPoint:'',lastMov:'',movie_choice:'',displayButton:'none',shouldUpdate:false};return _this;}_createClass(Movie,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(!firebase.apps.length){firebase.initializeApp(config);}this.ref=firebase.database().ref('movies');this.ref.on('value',function(snapshot){var movies=snapshot.val();var newData=[];for(var entry in movies){newData.push({id:entry,name:movies[entry].name,src:movies[entry].src,director:movies[entry].director,imdb:movies[entry].imdb,plot:movies[entry].plot});}_this2.setState({lastMov:newData[newData.length-1]});if(newData.length<9){_this2.setState({displayButton:'none'});}else{_this2.setState({displayButton:'block'});}});var first=this.ref.orderByKey().limitToFirst(9);first.on('value',function(snapshot){var movie=snapshot.val();var hit_eight=[];for(var entry in movie){hit_eight.push({id:entry,name:movie[entry].name,src:movie[entry].src,director:movie[entry].director,imdb:movie[entry].imdb,plot:movie[entry].plot});}_this2.setState({currPoint:hit_eight[hit_eight.length-1].id});hit_eight.pop();_this2.setState({movies:hit_eight});});this.listRef=firebase.database().ref('lists');this.listRef.on('value',function(snapshot){var lists=snapshot.val();var newData=[];for(var entry in lists){newData.push(lists[entry].name);}_this2.setState({lists:newData});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.ref.off();this.listRef.off();}},{key:\"searchMovies\",value:function searchMovies(){var _this3=this;var movie_choice=document.getElementById('search').value.toLowerCase();var ref=firebase.database().ref('movies');ref.once('value').then(function(snapshot){var movies=snapshot.val();var newData=[];for(var entry in movies){var title=movies[entry].name.toLowerCase();if(title.includes(movie_choice)){newData.push({id:entry,name:movies[entry].name,src:movies[entry].src,director:movies[entry].director,imdb:movies[entry].imdb,plot:movies[entry].plot});}}if(newData.length<9){_this3.setState({displayButton:'none'});}else{_this3.setState({displayButton:'block'});}_this3.setState({movies:newData});});}},{key:\"getMoreMovies\",value:function getMoreMovies(){var _this4=this;var ref=firebase.database().ref('movies');var next=ref.orderByKey().startAt(this.state.currPoint).limitToFirst(9);next.on('value',function(snapshot){var l_movie=snapshot.val();var hit_eight=[];for(var entry in l_movie){hit_eight.push({id:entry,name:l_movie[entry].name,src:l_movie[entry].src,director:l_movie[entry].director,imdb:l_movie[entry].imdb,plot:l_movie[entry].plot});}if(hit_eight[hit_eight.length-1].id===_this4.state.lastMov.id&&hit_eight.length<=8){_this4.setState({displayButton:'none'});}else{_this4.setState({currPoint:hit_eight[hit_eight.length-1].id});hit_eight.pop();}var m_count=_this4.state.movies;m_count=m_count.concat(hit_eight);_this4.setState({movies:m_count});});}},{key:\"enlarge\",value:function enlarge(image,title,director,rating,plot,idVal){document.body.style.overflow='hidden';var lightbox=document.createElement('div');lightbox.id='box';lightbox.className='box_setting';var box_wrap=document.createElement('img');box_wrap.src=image;box_wrap.id='box_wrap';var box_appearance=document.createElement('div');box_appearance.id='box_appearance';box_appearance.className='appearance';var box_info=document.createElement('div');box_info.id='box_info';box_info.innerHTML='<span class=\\'title\\'>'+title+'</span><br/><span class=\\'director\\'> Directed by:  '+director+'</span><br/> <p>'+plot+'</p>  <br/><br/>   <span class=\\'rating\\'>   &nbsp;&nbsp; &nbsp; IMDB Score: '+rating+'  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <br/><br/>';var addtolist=document.createElement('select');addtolist.id='addtolist';addtolist.style.marginTop='10px';var listRef=firebase.database().ref('lists');var tempList=[];listRef.once('value').then(function(snapshot){var lists=snapshot.val();for(var entry in lists){tempList.push(lists[entry].name);}var relRef=firebase.database().ref('relations');relRef.once('value').then(function(snapshot){var rels=snapshot.val();for(var _entry2 in rels){if(rels[_entry2].mov===idVal){var pos=tempList.indexOf(rels[_entry2].list);tempList.splice(pos,1);}}var opt=document.createElement('option');opt.value='';opt.innerHTML='List Options   <br/> <br/>';opt.disabled='true';opt.selected='true';opt.hidden='true';addtolist.appendChild(opt);for(var i in tempList){opt=document.createElement('option');opt.value=tempList[i];opt.innerHTML=tempList[i];addtolist.appendChild(opt);}});});var list_helper=document.createElement('div');var list_button=document.createElement('button');list_button.id='listbutton';list_button.innerHTML='Confirm List';list_helper.appendChild(addtolist);list_helper.appendChild(list_button);list_button.onclick=function(){var choice=document.getElementById('addtolist').value;if(choice.length===0){alert('No list has been selected.');}else{var formObj={mov:idVal,list:choice};firebase.database().ref('relations').push().set(formObj);alert('Confirmed Add!');}};var delete_func=document.createElement('button');delete_func.id='delete_button';delete_func.innerHTML='<br/> Delete Current Movie <br/><br/>';delete_func.onclick=function(){if(window.confirm('You Really Want Deletion ?')){var ref=firebase.database().ref('movies');ref.on('value',function(snapshot){var movies=snapshot.val();for(var entry in movies){if(entry===idVal){firebase.database().ref('movies/'+entry).remove();}}});var refList=firebase.database().ref('relations');refList.on('value',function(snapshot){var relations=snapshot.val();for(var entry in relations){if(relations[entry].mov===idVal){firebase.database().ref('relations/'+entry).remove();}}});document.getElementById('box').removeChild(document.getElementById('box_appearance'));document.body.removeChild(document.getElementById('box'));document.body.style.overflow='auto';}window.confirm('Deletion Complete!');};document.body.appendChild(lightbox);document.getElementById('box').appendChild(box_appearance);document.getElementById('box_appearance').appendChild(box_wrap);document.getElementById('box_appearance').appendChild(box_info);document.getElementById('box_info').appendChild(list_helper);document.getElementById('box_info').appendChild(delete_func);document.getElementById('box').addEventListener('click',function(event){if(event.target.className==='box_setting'){document.getElementById('box').removeChild(document.getElementById('box_appearance'));document.body.removeChild(document.getElementById('box'));document.body.style.overflow='auto';}});}// output\n},{key:\"render\",value:function render(){var _React$createElement;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h6\",null,/*#__PURE__*/React.createElement(\"br\",null)),\"Movie List:\",/*#__PURE__*/React.createElement(\"div\",{className:\"Movie_bars\"},/*#__PURE__*/React.createElement(\"div\",{className:\"lists_bar\"},/*#__PURE__*/React.createElement(\"select\",{name:\"movie_choice\",id:\"list\",onChange:this.myChangeHandler,style:{fontSize:19,fontFamily:'Comic Sans MS'}},/*#__PURE__*/React.createElement(\"option\",{value:\"all\"},\"All Movie Lists\"),/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(\"br\",null)),this.state.lists.map(function(list){return/*#__PURE__*/React.createElement(\"option\",{value:list},list);}))),/*#__PURE__*/React.createElement(\"h5\",null,/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"div\",{className:\"search_bar\"},/*#__PURE__*/React.createElement(\"input\",(_React$createElement={type:\"text\",id:\"bar_search\",placeholder:\"Which movie you want to see?\",name:\"search\"},_defineProperty(_React$createElement,\"id\",\"search\"),_defineProperty(_React$createElement,\"style\",{fontSize:19,fontFamily:'Comic Sans MS'}),_React$createElement)),/*#__PURE__*/React.createElement(\"button\",{id:\"search_button\",onClick:this.searchMovies.bind(this)},\"Search\")))),/*#__PURE__*/React.createElement(\"h5\",null,/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"div\",{className:\"Movies_content\"},/*#__PURE__*/React.createElement(Helper,{movieList:this.state.movies,enlarge:this.enlarge})),/*#__PURE__*/React.createElement(\"div\",{className:\"load_button_position\",style:{display:this.state.displayButton}},/*#__PURE__*/React.createElement(\"button\",{id:\"load_button\",onClick:this.getMoreMovies.bind(this)},\"Load More\")));}}]);return Movie;}(Component);export default Movie;","map":{"version":3,"sources":["/Users/yanghaochen/Desktop/CS185/CS185_hw8/src/Components/Movie.js"],"names":["React","Component","Helper","config","firebase","require","Movie","props","myChangeHandler","event","n","target","name","v","value","setState","movie_choice","document","getElementById","ref","database","once","then","snapshot","movies","val","newData","entry","push","id","src","director","imdb","plot","lastMov","length","displayButton","first","orderByKey","limitToFirst","l_movie","hit_eight","currPoint","pop","movsInList","rels","list","mov","movsRef","includes","state","lists","shouldUpdate","apps","initializeApp","on","movie","listRef","off","toLowerCase","title","next","startAt","m_count","concat","image","rating","idVal","body","style","overflow","lightbox","createElement","className","box_wrap","box_appearance","box_info","innerHTML","addtolist","marginTop","tempList","relRef","pos","indexOf","splice","opt","disabled","selected","hidden","appendChild","i","list_helper","list_button","onclick","choice","alert","formObj","set","delete_func","window","confirm","remove","refList","relations","removeChild","addEventListener","fontSize","fontFamily","map","searchMovies","bind","enlarge","display","getMoreMovies"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Helper from './Movie_helper2';\nimport config from '../config.js';\n// import './Movie.css';\nconst firebase = require('firebase');\n\nexport class Movie extends Component {\n  constructor(props) {\n    super();\n    this.state = {\n      movies: [],\n      lists: [],\n      currPoint: '',\n      lastMov: '',\n      movie_choice: '',\n      displayButton: 'none',\n      shouldUpdate: false,\n    }\n  }\n\n\n  componentDidMount(){\n    if (!firebase.apps.length) {\n      firebase.initializeApp(config);\n    }\n    \n    this.ref = firebase.database().ref('movies');\n    this.ref.on('value', snapshot => {\n      let movies = snapshot.val();\n        let newData = [];\n        for (let entry in movies) {\n          newData.push({\n            id:  entry,\n            name:  movies[entry].name,\n            src:  movies[entry].src,\n            director:  movies[entry].director,\n            imdb:  movies[entry].imdb,\n            plot:  movies[entry].plot,\n          })\n        }\n        \n        this.setState({lastMov: newData[newData.length-1]});\n        if(newData.length < 9) {\n          this.setState({displayButton: 'none'});\n        } \n        else {\n          this.setState({displayButton: 'block'});\n        }\n    });\n\n    let first = this.ref.orderByKey().limitToFirst(9);\n    first.on('value', snapshot => {\n      let movie = snapshot.val();\n      let hit_eight = [];\n      for (let entry in movie) {\n        hit_eight.push({\n          id:  entry,\n          name:  movie[entry].name,\n          src:  movie[entry].src,\n          director:  movie[entry].director,\n          imdb:  movie[entry].imdb,\n          plot:  movie[entry].plot,\n        });\n      }\n\n      this.setState({currPoint: hit_eight[hit_eight.length-1].id});\n      hit_eight.pop();\n      this.setState({movies: hit_eight});\n    });\n\n    this.listRef = firebase.database().ref('lists');\n    this.listRef.on('value', snapshot => {\n      let lists = snapshot.val();\n        let newData = [];\n        for (let entry in lists) {\n          newData.push(\n            lists[entry].name\n          )\n        }\n        this.setState({lists: newData});\n    })\n  }\n\n\n  componentWillUnmount() {\n    this.ref.off();\n    this.listRef.off();\n  }\n\n\n  searchMovies() {\n    let movie_choice = document.getElementById('search').value.toLowerCase();\n    let ref = firebase.database().ref('movies');\n    ref.once('value').then(snapshot => {\n      let movies = snapshot.val();\n        let newData = [];\n        for (let entry in movies) {\n          let title = (movies[entry].name).toLowerCase();\n          if (title.includes(movie_choice)) {\n            newData.push({\n              id:  entry,\n              name:  movies[entry].name,\n              src:  movies[entry].src,\n              director:  movies[entry].director,\n              imdb:  movies[entry].imdb,\n              plot:  movies[entry].plot,\n            })\n          }\n        }\n        if(newData.length < 9) {\n          this.setState({displayButton: 'none'});\n        } \n        else {\n          this.setState({displayButton: 'block'});\n        }\n        this.setState({movies: newData});\n    })\n  }\n\n\n  getMoreMovies() {\n    let ref = firebase.database().ref('movies');\n    let next = ref.orderByKey().startAt(this.state.currPoint).limitToFirst(9);\n    next.on('value', snapshot => {\n      let l_movie = snapshot.val();\n      let hit_eight = [];\n      for (let entry in l_movie) {\n        hit_eight.push({\n          id:  entry,\n          name:  l_movie[entry].name,\n          src:  l_movie[entry].src,\n          director:  l_movie[entry].director,\n          imdb:  l_movie[entry].imdb,\n          plot:  l_movie[entry].plot,\n        });\n      }\n      if(hit_eight[hit_eight.length-1].id === this.state.lastMov.id && hit_eight.length <= 8) {\n        this.setState({displayButton: 'none'});\n      } \n      else {\n        this.setState({currPoint: hit_eight[hit_eight.length-1].id});\n        hit_eight.pop();\n      }\n      let m_count = this.state.movies;\n      m_count = m_count.concat(hit_eight);\n      this.setState({movies: m_count});\n    });\n  }\n\n\n  myChangeHandler = (event) => {\n    let n = event.target.name;\n    let v = event.target.value;\n    this.setState({[n]: v});   \n    \n    let movie_choice = document.getElementById('list').value;\n    if(movie_choice === 'all') {\n      let ref = firebase.database().ref('movies');\n      ref.once('value').then(snapshot => {\n        let movies = snapshot.val();\n          let newData = [];\n          for (let entry in movies) {\n            newData.push({\n              id:  entry,\n              name:  movies[entry].name,\n              src:  movies[entry].src,\n              director:  movies[entry].director,\n              imdb:  movies[entry].imdb,\n              plot:  movies[entry].plot,\n            })\n          }\n          this.setState({lastMov: newData[newData.length-1]});\n          if(newData.length < 9) {\n            this.setState({displayButton: 'none'});\n          } \n          else {\n            this.setState({displayButton: 'block'});\n          }\n      });\n\n      \n      let first = ref.orderByKey().limitToFirst(9);\n      first.once('value').then(snapshot => {\n        let l_movie = snapshot.val();\n        let hit_eight = [];\n        for (let entry in l_movie) {\n          hit_eight.push({\n            id:  entry,\n            name:  l_movie[entry].name,\n            src:  l_movie[entry].src,\n            director:  l_movie[entry].director,\n            imdb:  l_movie[entry].imdb,\n            plot:  l_movie[entry].plot,\n          });\n        }\n        this.setState({currPoint: hit_eight[hit_eight.length-1].id});\n        hit_eight.pop();\n        this.setState({movies: hit_eight});\n      });\n    } \n    \n    \n    else {\n      let movsInList = [];\n      let ref = firebase.database().ref('relations');\n      ref.once('value').then(snapshot => {\n        let rels = snapshot.val();\n        for (let entry in rels) {\n          if(rels[entry].list === movie_choice) {\n            movsInList.push(rels[entry].mov);\n          }\n        }\n        let movsRef = firebase.database().ref('movies');\n        movsRef.once('value').then(snapshot => {\n          let movies = snapshot.val();\n          let newData = [];\n          for (let entry in movies) {\n            if (movsInList.includes(entry)) {\n              newData.push({\n                id:  entry,\n                name:  movies[entry].name,\n                src:  movies[entry].src,\n                director:  movies[entry].director,\n                imdb:  movies[entry].imdb,\n                plot:  movies[entry].plot,\n              })\n            }\n          }\n          if(newData.length < 9) {\n            this.setState({displayButton: 'none'});\n          } else {\n            this.setState({displayButton: 'block'});\n          }\n          this.setState({movies: newData});\n        })\n      })\n    }\n  }\n\n\n  enlarge(image, title, director, rating, plot, idVal) {\n    document.body.style.overflow = 'hidden';\n  \n    var lightbox = document.createElement('div');\n    lightbox.id = 'box';\n    lightbox.className = 'box_setting';\n    var box_wrap = document.createElement('img');\n    box_wrap.src = image;\n    box_wrap.id = 'box_wrap';\n    var box_appearance = document.createElement('div');\n    box_appearance.id = 'box_appearance';\n    box_appearance.className = 'appearance'; \n    var box_info = document.createElement('div');\n    box_info.id = 'box_info';\n    box_info.innerHTML = '<span class=\\'title\\'>'+title+'</span><br/><span class=\\'director\\'> Directed by:  '+director+'</span><br/> <p>'+plot+'</p>  <br/><br/>   <span class=\\'rating\\'>   &nbsp;&nbsp; &nbsp; IMDB Score: '+rating+'  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <br/><br/>';\n\n    var addtolist = document.createElement('select');\n    addtolist.id = 'addtolist';\n    addtolist.style.marginTop = '10px';\n    let listRef = firebase.database().ref('lists');\n    let tempList = [];\n    listRef.once('value').then(snapshot => {\n    \n      let lists = snapshot.val();\n        for (let entry in lists) {\n          tempList.push(lists[entry].name);\n        }\n        let relRef = firebase.database().ref('relations');\n        relRef.once('value').then(snapshot => {\n          let rels = snapshot.val();\n            for (let entry in rels) {\n              if(rels[entry].mov === idVal) {\n                let pos = tempList.indexOf(rels[entry].list);\n                tempList.splice(pos, 1);\n              }\n            }\n            var opt = document.createElement('option');\n            opt.value = '';\n            opt.innerHTML = 'List Options   <br/> <br/>';\n            opt.disabled = 'true';\n            opt.selected = 'true';\n            opt.hidden = 'true';\n            addtolist.appendChild(opt);\n            for(var i in tempList) {\n              opt = document.createElement('option');\n              opt.value= tempList[i];\n              opt.innerHTML = tempList[i]; \n              addtolist.appendChild(opt);\n            }\n        });\n    });\n\n\n    var list_helper = document.createElement('div');\n    var list_button = document.createElement('button');\n    list_button.id = 'listbutton';\n    list_button.innerHTML = 'Confirm List';\n\n\n    list_helper.appendChild(addtolist);\n    list_helper.appendChild(list_button);\n\n    list_button.onclick = function () {\n      var choice = document.getElementById('addtolist').value;\n      if(choice.length === 0) {\n        alert('No list has been selected.');\n      } \n      \n      else {\n        let formObj = {\n          mov: idVal, \n          list: choice,\n        };\n\n      firebase.database().ref('relations').push().set(formObj);\n      alert('Confirmed Add!');\n      }\n    };\n\n    var delete_func = document.createElement('button');\n    delete_func.id = 'delete_button';\n    delete_func.innerHTML = '<br/> Delete Current Movie <br/><br/>';\n\n    delete_func.onclick = function () {\n    if(window.confirm('You Really Want Deletion ?')) {\n        let ref = firebase.database().ref('movies');\n        ref.on('value', snapshot => {\n          let movies = snapshot.val();\n            for (let entry in movies) {\n              if(entry === idVal) {firebase.database().ref('movies/'+entry).remove();}\n            }\n        })\n        let refList = firebase.database().ref('relations');\n        refList.on('value', snapshot => {\n          let relations = snapshot.val();\n            for (let entry in relations) {\n              if(relations[entry].mov === idVal) {firebase.database().ref('relations/'+entry).remove();}\n            }\n      })\n      document.getElementById('box').removeChild(document.getElementById('box_appearance'));\n      document.body.removeChild(document.getElementById('box'));\n      document.body.style.overflow = 'auto';\n      }\n      window.confirm('Deletion Complete!');\n    };\n\n    document.body.appendChild(lightbox);  \n    document.getElementById('box').appendChild(box_appearance);\n    document.getElementById('box_appearance').appendChild(box_wrap);\n    document.getElementById('box_appearance').appendChild(box_info);\n    document.getElementById('box_info').appendChild(list_helper);\n    document.getElementById('box_info').appendChild(delete_func);\n\n    document.getElementById('box').addEventListener('click', function(event) {\n      if(event.target.className === 'box_setting') {\n        document.getElementById('box').removeChild(document.getElementById('box_appearance'));\n        document.body.removeChild(document.getElementById('box'));\n        document.body.style.overflow = 'auto';\n      }\n    });\n  }\n\n\n  // output\n  render() {\n    return (\n      <div >\n          <div>\n\n          <h6><br/></h6>\n          Movie List:\n            <div className = 'Movie_bars'>\n\n            <div className='lists_bar'>\n              <select name='movie_choice' id='list' onChange={this.myChangeHandler}\n                style={{ fontSize: 19, fontFamily: 'Comic Sans MS'}}>\n                <option value='all'>All Movie Lists</option>\n                <h1><br/></h1>\n                \n                {\n                  this.state.lists.map((list) => (\n                    <option value={list}>{list}</option>\n                  ))\n                }\n              </select>\n            </div>\n\n            <h5><br/></h5>\n\n            <div className='search_bar'>\n              <input type='text' id='bar_search' placeholder='Which movie you want to see?' name='search' id='search' \n                style={{fontSize: 19, fontFamily: 'Comic Sans MS'}}/>\n\n              <button id='search_button' onClick={this.searchMovies.bind(this)} >Search</button>\n            </div>\n\n            </div>\n\n          </div>\n\n          <h5><br/></h5>\n\n          <div className='Movies_content'>\n            <Helper movieList={this.state.movies} enlarge={this.enlarge} />\n          </div>\n\n          <div className='load_button_position' style={{display: this.state.displayButton}}>\n            <button id='load_button' onClick={this.getMoreMovies.bind(this)}>Load More</button>\n          </div>\n\n      </div>\n    );\n  }\n}\nexport default Movie;"]},"metadata":{},"sourceType":"module"}